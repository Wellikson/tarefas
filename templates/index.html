<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <title>Gerenciador de Tarefas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Gerenciador de Tarefas - Usu√°rio: {{ usuario_nome }}</h1>
    <a href="/logout">Sair</a>

    <form action="/add" method="POST">
        <input type="text" name="atividade" placeholder="Digite a atividade" required />
        <select name="status">
            <option value="Pendente">Pendente</option>
            <option value="Iniciado">Iniciado</option>
            <option value="Completo">Completo</option>
        </select>
        <button type="submit">Adicionar</button>
    </form>

    <h2>Pendentes</h2>
    <ul>
        {% for t in pendentes %}
        <li class="task-card status-pendente">
            <div class="task-info">{{ t.atividade }}</div>
            <form action="/update/{{ t.id }}" method="POST" style="display:inline">
                <select name="status" class="status-select">
                    <option value="Pendente" {% if t.status == "Pendente" %}selected{% endif %}>Pendente</option>
                    <option value="Iniciado" {% if t.status == "Iniciado" %}selected{% endif %}>Iniciado</option>
                    <option value="Completo" {% if t.status == "Completo" %}selected{% endif %}>Completo</option>
                </select>
                <button type="submit">Ok</button>
            </form>
            <a href="/delete/{{ t.id }}" class="delete-link">Excluir</a>
        </li>
        {% else %}
        <li>Nenhuma tarefa pendente.</li>
        {% endfor %}
    </ul>

    <h2>Iniciadas</h2>
    <ul>
        {% for t in iniciadas %}
        <li class="task-card status-iniciado">
            <div class="task-info">{{ t.atividade }}</div>
            <form action="/update/{{ t.id }}" method="POST" style="display:inline">
                <select name="status" class="status-select">
                    <option value="Pendente" {% if t.status == "Pendente" %}selected{% endif %}>Pendente</option>
                    <option value="Iniciado" {% if t.status == "Iniciado" %}selected{% endif %}>Iniciado</option>
                    <option value="Completo" {% if t.status == "Completo" %}selected{% endif %}>Completo</option>
                </select>
                <button type="submit">Ok</button>
            </form>
            <a href="/delete/{{ t.id }}" class="delete-link">Excluir</a>
        </li>
        {% else %}
        <li>Nenhuma tarefa iniciada.</li>
        {% endfor %}
    </ul>

    <h2>Completas</h2>
    <ul>
        {% for t in completas %}
        <li class="task-card status-completo">
            <div class="task-info">{{ t.atividade }}</div>
            <form action="/update/{{ t.id }}" method="POST" style="display:inline">
                <select name="status" class="status-select">
                    <option value="Pendente" {% if t.status == "Pendente" %}selected{% endif %}>Pendente</option>
                    <option value="Iniciado" {% if t.status == "Iniciado" %}selected{% endif %}>Iniciado</option>
                    <option value="Completo" {% if t.status == "Completo" %}selected{% endif %}>Completo</option>
                </select>
                <button type="submit">Ok</button>
            </form>
            <a href="/delete/{{ t.id }}" class="delete-link">Excluir</a>
        </li>
        {% else %}
        <li>Nenhuma tarefa completa.</li>
        {% endfor %}
    </ul>
</body>
</html>
