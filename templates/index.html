<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <title>Gerenciador de Tarefas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Gerenciador de Tarefas - Usu√°rio: {{ usuario_nome }}</h1>
    <a href="/logout">Sair</a>

    <form action="/add" method="POST">
        <input type="text" name="atividade" placeholder="Digite a atividade" required />
        <select name="status" aria-label="Status da tarefa">
            <option value="Pendente">Pendente</option>
            <option value="Iniciado">Iniciado</option>
            <option value="Completo">Completo</option>
        </select>
        <button type="submit">Adicionar</button>
    </form>

    {% for categoria, lista in {"Pendentes": pendentes, "Iniciadas": iniciadas, "Completas": completas}.items() %}
    <h2>{{ categoria }}</h2>
    <ul>
        {% for t in lista %}
        <li>
            {{ t.atividade }}
            <form action="/update/{{ t.id }}" method="POST" style="display:inline">
                <select name="status">
                    <option value="Pendente" {% if t.status == "Pendente" %}selected{% endif %}>Pendente</option>
                    <option value="Iniciado" {% if t.status == "Iniciado" %}selected{% endif %}>Iniciado</option>
                    <option value="Completo" {% if t.status == "Completo" %}selected{% endif %}>Completo</option>
                </select>
                <button type="submit">Ok</button>
            </form>
            <a href="/delete/{{ t.id }}">Excluir</a>
        </li>
        {% else %}
        <li>Nenhuma tarefa {{ categoria.lower() }}.</li>
        {% endfor %}
    </ul>
    {% endfor %}
</body>
</html>
