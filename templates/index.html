<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <title>Gerenciador de Tarefas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Gerenciador de Tarefas - Usuário: {{ usuario_nome }}</h1>
    <a href="/logout" class="logout">Sair</a>

    <!-- Formulário de adicionar -->
    <form action="/add" method="POST">
        <input type="text" name="atividade" placeholder="Digite a atividade" required />
        <select name="status" aria-label="Status da tarefa">
            <option value="Pendente">Pendente</option>
            <option value="Iniciado">Iniciado</option>
            <option value="Completo">Completo</option>
        </select>
        <button type="submit">Adicionar</button>
    </form>

    <!-- Pendentes -->
    <h2>Pendentes</h2>
    <ul>
        {% for t in pendentes %}
        <li>
            <span>{{ t.atividade }}</span>
            <form action="/update/{{ t.id }}" method="POST" style="display:flex;align-items:center;">
                <select name="status" class="status-{{ t.status|lower }}">
                    <option value="Pendente" {% if t.status == "Pendente" %}selected{% endif %}>Pendente</option>
                    <option value="Iniciado" {% if t.status == "Iniciado" %}selected{% endif %}>Iniciado</option>
                    <option value="Completo" {% if t.status == "Completo" %}selected{% endif %}>Completo</option>
                </select>
                <button type="submit">Ok</button>
            </form>
            <a href="/delete/{{ t.id }}" class="delete">Excluir</a>
        </li>
        {% else %}
        <li><span>Nenhuma tarefa pendente.</span></li>
        {% endfor %}
    </ul>

    <!-- Iniciadas -->
    <h2>Iniciadas</h2>
    <ul>
        {% for t in iniciadas %}
        <li>
            <span>{{ t.atividade }}</span>
            <form action="/update/{{ t.id }}" method="POST" style="display:flex;align-items:center;">
                <select name="status" class="status-{{ t.status|lower }}">
                    <option value="Pendente" {% if t.status == "Pendente" %}selected{% endif %}>Pendente</option>
                    <option value="Iniciado" {% if t.status == "Iniciado" %}selected{% endif %}>Iniciado</option>
                    <option value="Completo" {% if t.status == "Completo" %}selected{% endif %}>Completo</option>
                </select>
                <button type="submit">Ok</button>
            </form>
            <a href="/delete/{{ t.id }}" class="delete">Excluir</a>
        </li>
        {% else %}
        <li><span>Nenhuma tarefa iniciada.</span></li>
        {% endfor %}
    </ul>

    <!-- Completas -->
    <h2>Completas</h2>
    <ul>
        {% for t in completas %}
        <li>
            <span>{{ t.atividade }}</span>
            <form action="/update/{{ t.id }}" method="POST" style="display:flex;align-items:center;">
                <select name="status" class="status-{{ t.status|lower }}">
                    <option value="Pendente" {% if t.status == "Pendente" %}selected{% endif %}>Pendente</option>
                    <option value="Iniciado" {% if t.status == "Iniciado" %}selected{% endif %}>Iniciado</option>
                    <option value="Completo" {% if t.status == "Completo" %}selected{% endif %}>Completo</option>
                </select>
                <button type="submit">Ok</button>
            </form>
            <a href="/delete/{{ t.id }}" class="delete">Excluir</a>
        </li>
        {% else %}
        <li><span>Nenhuma tarefa completa.</span></li>
        {% endfor %}
    </ul>
</body>
</html>
